{"version":3,"sources":["../../node_modules/monolite/lib/deepEqual.js","../../node_modules/monolite/lib/accessorChain.js","../../node_modules/monolite/lib/monolite.js","../../node_modules/sherlockjs/sherlock.js","../../node_modules/strict-uri-encode/index.js","../../node_modules/decode-uri-component/index.js","../../node_modules/query-string/index.js","popup.ts"],"names":["module","exports","str","encodeURIComponent","replace","x","charCodeAt","toString","toUpperCase","token","singleMatcher","RegExp","multiMatcher","decodeComponents","components","split","decodeURIComponent","join","err","length","left","slice","right","Array","prototype","concat","call","decode","input","tokens","match","i","customDecodeURIComponent","replaceMap","exec","result","entries","Object","keys","key","encodedURI","TypeError","strictUriEncode","require","decodeComponent","encoderForArrayFormat","options","arrayFormat","value","index","encode","parserForArrayFormat","accumulator","undefined","strict","keysSorter","isArray","sort","a","b","Number","map","extract","queryStart","indexOf","parse","assign","formatter","ret","create","trim","param","reduce","Boolean","stringify","obj","defaults","value2","push","filter","parseUrl","url","query"],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACrEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtwBA;;ACAA,ADCAA,OAAOC,OAAP,GAAiBC,OAAOC,mBAAmBD,GAAnB,EAAwBE,OAAxB,CAAgC,UAAhC,EAA4CC,WAASA,EAAEC,UAAF,CAAa,CAAb,EAAgBC,QAAhB,CAAyB,EAAzB,EAA6BC,WAA7B,EAArD,CAAxB;;ACAA,ACDA,IDCIC,QAAQ,cAAZ;AACA,IAAIC,gBAAgB,IAAIC,MAAJ,CAAWF,KAAX,EAAkB,IAAlB,CAApB;AACA,IAAIG,eAAe,IAAID,MAAJ,CAAW,MAAMF,KAAN,GAAc,IAAzB,EAA+B,IAA/B,CAAnB;;AAEA,ACJA,IAAMiC,KDIG7B,aCJe8B,GDIxB,CAA0B7B,ICJM,MDIhC,EAAsCC,KAAtC,EAA6C,ICJrB,CAAxB;ADKC,ACJD,IAAM6B,CDID,iBCJmBD,QAAQ,sBAAR,CAAxB;ADKE;AACA,ACJF,SDIS3B,ACJA6B,mBDImB/B,ECJ5B,CAA+BgC,OAA/B,CDIuC7B,CCJC,GDIZ,CAAgB,EAAhB,CAAnB,CAAP;AACA,ACJD,EDCA,CAGE,MCJM6B,CDIC5B,GAAP,EAAY,ECJE6B,WAAhB;ADKC,ACJA,OAAK,OAAL;ADKA,ACJC,UAAO,UAACR,GAAD,EAAMS,KAAN,EAAaC,KAAb,EAAuB;AAC7B,WAAOD,UAAU,IAAV,GAAiB,CACvBE,OAAOX,GAAP,EAAYO,OAAZ,CADuB,EAEvB,GAFuB,EAGvBG,KAHuB,EAIvB,GAJuB,EAKtBhC,IALsB,CAKjB,EALiB,CAAjB,GAKM,CACZiC,OAAOX,GAAP,EAAYO,OAAZ,CADY,EAEZ,GAFY,EAGZI,OAAOD,KAAP,EAAcH,OAAd,CAHY,EAIZ,IAJY,EAKZI,OAAOF,KAAP,EAAcF,OAAd,CALY,EAMX7B,IANW,CAMN,EANM,CALb;ADKH,ACOG,IAbD,CDMEH,WAAWK,MAAX,KAAsB,CAA1B,EAA6B;AAC5B,ACOA,OAAK,EDPEL,OCOP,GDPA;AACA,ACOC,UAAO,UAACyB,GAAD,EAAMS,KAAN,EAAgB;AACtB,WAAOA,UAAU,IAAV,GAAiB,CAACE,OAAOX,GAAP,EAAYO,OAAZ,CAAD,EAAuB,IAAvB,EAA6B7B,IAA7B,CAAkC,EAAlC,CAAjB,GAAyD,CAC/DiC,OAAOX,GAAP,EAAYO,OAAZ,CAD+D,EAE/D,KAF+D,EAG/DI,OAAOF,KAAP,EAAcF,OAAd,CAH+D,EAI9D7B,IAJ8D,CAIzD,EAJyD,CAAhE;ADNHF,ACWG,IAND,KDLMA,SAAS,CAAjB;ACYC,AC7BF,IAAA,aAAA,QAAA,UAAA,CAAA;AFmBC,ACWE,AC7BH,IAAA,MD6BU,SC7BV,CD6BWwB,GAAD,EAAMS,KAAN,EAAgB,GC7B1B,QAAA,YAAA,CAAA,CAAA;AFmBC,ACWG,AC7BJ,IAAA,CFkBK5B,MCWM4B,CDXClC,SCWS,AC7BrB,EFkBuBO,ECWZ,GDXC,ACWgB6B,CDXC,CAAjB,EAAoBnC,GCWGwB,EDXvB,AElBZ,CFkBC,ACW2B,EAAYO,KC7BxC,ED6B4B,CAAjB,GAAwC,CAC9CI,OAAOX,AC9BZ,CAAA,CAAA,CD8BK,EAAYO,OAAZ,CAD8C,EAE9C,GAF8C,EAG9CI,OAAOF,KAAP,EAAcF,OAAd,CAH8C,EAI7C7B,IAJ6C,CAIxC,EAJwC,CAA/C;ADVH,ACeG,AChCJ,ID0BG,AC1BG,CFiBDK,QAAQR,CEjBG,SAAV,CFiBkBO,KAAX,CAAiBN,AEjBd,GAAA,EFiBH,CAAZ;AChBA,ACDgB,QAAA,MAAA,EAAA;AFmBhB,ACeA,QDfOQ,CEnBS,IAAA,CFmBHC,IEnBG,GAAA,EFmBT,CAAgBC,EEnBP,IFmBT,CAAuBC,IAAvB,CAA4B,AEnBnB,EFmBT,EAAgCb,IEnBvB,MAAM,OFmBkCO,IAAjB,CAAhC,EAAwDP,iBAAiBS,KAAjB,CAAxD,CAAP;AACA,AEpBgB,YAAA,EAAA,IAAA,UAAA,EAAA,CAAA;ADoCjB,SAAS6B,oBAAT,CAA8BL,OAA9B,EAAuC;ADdvC,ACeC,ACpCC,KDoCGX,IDfIR,EErBP,IFqBF,AEpBK,CFoBWC,ICef,CDfD,CErBE,CFqBqB,EEnBlB,MAFH,CAEU,UAAC,MAAD,EAAS,MAAT,EAAe;AFoB1B,AEpB+B,KFoB3B,UEpB2B,UAAA,KAAA,EAAK;AFqBnC,ACeD,ACpCwC,SFqBhCZ,ACeA8B,QAAQC,ECpCwB,OAAO,EFqBpBnB,ACe3B,KDfQ,AErB8C,CFqBrD,IErB8C,CAAP,CAAA;AFsBvC,ACeA,ACrC4D,EFoB7D,CAEE,ICeI,ECrCyB,CFsBtBV,GAAP,CCeD,CDfa;AACb,ACeC,ACtC2D,KAF5D,CFyBIW,CEvB0D,GDsCtD,KDfKD,EEvBiD,GDsCrDW,CDfUT,CEvB2C,CDsCtD,CCtC2D,CDsCrDkB,CDfD,CAAYtC,GCejB,EAAa0C,QDfR,CAAb,ECeQ,EAA6B;AACnCjB,ACvCqE,aDuC5D,ECvC4D,KAAA,MDuC/CD,IAAb,CAAkBK,GAAlB,CAAT;ADdF,AEzB4E,KAF5E,CAAA,CF2BK,IAAIR,IAAI,CAAb,EAAgBA,IAAIF,OAAOV,MAA3B,EAAmCY,GAAnC,EAAwC;AACvCH,ACeCW,ACzC2E,CAH/E,SD4CUA,CDfC1B,GCeGT,OAAJ,CAAY,MDfMyB,ICelB,EDfC,ACeuB,EDfEE,ACe1B,CDfC,ACeP,EDfmCd,IAA5B,CAAiC,EAAjC,CAAR;AExBH,IAAM,kBAAkB,SAAlB,eAAkB,CAAC,IAAD,EAAW;AF0BhCY,ACeC,ACzCoC,QDyChC,CAACM,ECzC+B,CF0B5BP,GCeR,EAAa,CDfCE,KAAN,CAAYpB,GE1BgC,IAAhB,EAAsB,IF0BlD,CAAT,CE1BqC,CAA6B,CAA7B,EAAgC,CAAhC,CAAA;AF2BrC,ACeE0C,AC1CqE,CAA1E,gBD0CiBb,GAAZ,IAAmBS,KAAnB;AACA,ACzCL,IAAM,kBAAkB,SAAlB,eAAkB,CAAC,IAAD,EAAW;AF2BjC,ACeG,ACzCH,SF0BOpB,EE1BP,GF0BA,EE1BK,WAAL,GAAmB,OAAnB,CAA2B,eAA3B,EAA4C,EAA5C,CAAA;AF2BA,AE3B+C,CADjD;AF6BC,ACeG,ACzCJ,IAAM,IDyCEwB,YAAYb,CCzCG,EDyCf,MAAqBc,CCzCvB,QDyCF,EAAoC,ICzCjB,CAAC,IAAD,EAAW;AD0C7BD,ACzCH,QAAI,SDyCWb,ECzCA,CDyCZ,GCzCgB,CDyCG,EAAnB,CCzCY,EAAf;AF2BF,ACeK,ACzCH,SF0BOP,IE1BE,OAAT,CAAiB,KAAK,OF0BxB,AE1BmB,CF0BeJ,IE1BE,CF0BpC,AE1BE,EF0BuC;AACxC,AE1BC,aAAS,QAAT,CAAkB,CAAlB,EAAqB,CAArB,EAAwB,CAAxB;AF2BD,ACeGwB,ACzCF,KF0BGnB,ME1BI,CAAC,IDyCMM,ACzCP,EF0BS,AE1BF,CDyCZ,EAAiBJ,KCzCZ,CAAP,CDyC0B,CAAP,CAAjB,IAA8Ba,KAA9B;ADdF,ACeE,ACzCH,CALD,GD+BG,QDAS,cADM;AAEhB,ACeA,ACxCF,IAAM,GDwCC,KDfK,ICeV,MCxCsB,SAAlB,eAAkB,CAAC,IAAD,EAAW;AFuBjB,ACkBf,ACxCD,EFsBD,MEtBK,EDwCI,UAACT,ACxCO,GDwCR,CCxCY,CDwCNS,GCxCE,EDwCR,ACxCR,EDwCqBI,WAAb,EAA6B;AACnCjB,ACxCF,aDwCW,CCxCD,OAAV,CAAkB,CDwCGD,IAAV,ACxCY,CDwCGK,GAAf,CAAT,ECxCgB,EAAlB;AF0BD,ACeGA,ACxCF,KFyBGT,KCeKS,GDfG3B,CCeCR,ACxCF,ODwCF,ACxCR,CDwCoB,ACxCF,IFyBM8B,CEzBD,EDwCf,CDfG,CAAkBN,ACeA,EAArB,CAAN,ACxCgB,EFyBP,CAAZ,EEzBoC,IAAI,EAAJ,GAAS,EAAT,GAAc,IAAjD;AF0BD,AEzBC,QFyBME,GEzBC,CAAC,CFyBT,EAAc,CEzBN,EAAO,SAAP,CAAP;AF0BA,ACeE,ACxCH,CALD,KF8BM,ECeE,CAACK,MAAL,EAAa;ADdd,ACeEiB,ACvCL,IAAM,aDuCWb,CCvCG,EDuCf,IAAmBS,GCvClB,EDuCD,SCvCe,CAAA,IAAA,EAAI;AFyBrBf,ACeE,ACvCH,QAAM,MFwBMH,MAAM,CAAN,CAAX,CExBoB,GFwBGd,UExBH,SFwBsBc,AExBtB,EAAS,IFwBmB,CAAN,AExBtB,CFwBG,AExBY,CFwBnC,GExBoB,CAArB;AFyBC,ACeE,ACvCK,GFqBR,CAGE,IExBM,GFwBCZ,GAAP,EAAY,KExBN,aAAA,UAAA;AFyBP,AEzBO,OFyBHiB,CEzBe,QFyBNR,IEzBM,GFyBCG,MAAM,CAAN,CAAP,CAAb,CEzBmB,SAAZ;ADyCN,ACzCM,QDyCFsB,ACzCyB,UAAA,EDyCbb,GAAZ,MAAqBc,ECzCI,ODyC7B,ACzCM,EDyC8B;ADdrC,ACeED,AC1CK,OF2BHjB,CE3BmC,SD0CzBI,CDfCT,CE3BwB,CD0CrC,IDfmB,ACeA,CDfN,ACeOkB,CDftB,EAAyB,ECeJ,CAAnB,CC1CqC,QAAhC;AF4BNf,ACeC,ACzCH,QAAM,OF0BOH,CE1BC,KF0BK,CAAN,CAAX,IAAuBK,MAAvB;AACA,ACeC,ACzCD,iBAAS,IADG;AF4Bb,AE1BC,gBAAQ,UAFI;AD4CZiB,ACzCA,cAAM,EDyCMb,GAAZ,IAAmB,GAAGd,MAAH,CAAU2B,YAAYb,GAAZ,CAAV,EAA4BS,KAA5B,CAAnB;ADdFlB,ACeE,AC7CY,ID8Bb,CC9BD,KF8BQlB,aAAasB,IAAb,CAAkBN,KAAlB,CAAR;AACA,ACeA,ACzCA,QAAI,eAAe,CAAC,SAAD,EAAY,OAAZ,CAAnB;AD0CC,ACzCD,QAAI,EDyCI,UAACW,ECzCS,CDyCV,EAAMS,CCzCd,EAAwB,EDyChB,EAAaI,WAAb,EAA6B;ADdtC,ACeG,ACzCA,QDyCIA,OCzCG,KDyCSb,GAAZ,MAAqBc,SAAzB,EAAoC,oCCzCpC;AF2BHpB,ACeImB,ACzCF,YF0BS,KAAX,ACegBb,GAAZ,CDfgB,GCeGS,KDfvB,ACeI;AACA,ACzCH,QAAI,YAAY,IAAhB,EAAsB;AF2BvB,ACeI,ACzCD,KF0BCZ,UAAUC,OAAOC,CE1BH,GF0BJ,CAAYL,UAAZ,CAAd,CE1BkC,SAAhB,CAAf;AACD;AF2BF,ACeGmB,ACzCF,MF0BI,EE1BA,EF0BIrB,IAAI,CAAb,CCeeQ,ACzCd,CF0BeR,CE1BD,CDyCZ,EDfiBK,ECeE,GAAGX,GDfGN,GCeN,CAAUiC,EDfhC,EAAoCrB,GAApC,EAAyC,GCeGQ,GAAZ,CAAV,EAA4BS,KAA5B,CAAnB;ADdF,ACeE,ACzCA,IDkCD,mBClCgB,eAAe,SAAf,CAAf;AF2BF,AC7BD,ACGE,MF0BGT,MAAMH,QAAQL,CAAR,CAAV;AACAH,ACeD,ACzCC,QAAM,EF0BEA,MAAMxB,AE1BA,OF0BN,CAAc,IAAIO,CEzBvB,KFyBmB,CAAW4B,AE1BnB,CACJ,EFyBY,EAAgB,GAAhB,CAAd,EAAoCN,AEzBlC,IAAA,EAAI,KFyByCM,GAAX,CAApC,CAAR;AACA,AE1BkB,eAAA,gBAAgB,IAAhB;AD0CpB,AC1CwC,KADxB,EAEX,EDyCIW,CC3CO,CAEP,IDyCT,CAAgBF,KAAhB,ACzCS,EDyCcF,ECzCd,EAAI,GDyCb,EAAgC;ADd/B,ACeA,ACzCK,KDyCDA,GDfGlB,IE1BE,CF0BT,ACeYsB,MAAZ,CCzCK,CDyC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","file":"popup.map","sourceRoot":"../js","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar arrayEqual = function arrayEqual(a, b) {\n    if (a.length !== b.length) return false;\n    for (var index in a) {\n        if (!deepEqual(a[index], b[index])) return false;\n    }return true;\n};\nvar objectEqual = function objectEqual(a, b) {\n    var propsA = Object.getOwnPropertyNames(a);\n    var propsB = Object.getOwnPropertyNames(b);\n    if (propsA.length !== propsB.length) return false;\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n        for (var _iterator = propsA[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            var prop = _step.value;\n\n            if (!Object.prototype.hasOwnProperty.call(b, prop) || !deepEqual(a[prop], b[prop])) return false;\n        }\n    } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n    } finally {\n        try {\n            if (!_iteratorNormalCompletion && _iterator.return) {\n                _iterator.return();\n            }\n        } finally {\n            if (_didIteratorError) {\n                throw _iteratorError;\n            }\n        }\n    }\n\n    return true;\n};\nvar deepEqual = function deepEqual(a, b) {\n    if (a === b) return true;\n    if ((typeof a === 'undefined' ? 'undefined' : _typeof(a)) !== (typeof b === 'undefined' ? 'undefined' : _typeof(b))) return false;\n    if (a === null || b === null) return false;\n    if (Array.isArray(a)) return arrayEqual(a, b);\n    if ((typeof a === 'undefined' ? 'undefined' : _typeof(a)) === 'object') return objectEqual(a, b);\n    return a.valueOf() === b.valueOf();\n};\nexports.default = deepEqual;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nvar createAccessorChainFiller = function createAccessorChainFiller(accessorChain) {\n    var fillerProxy = new Proxy({}, {\n        get: function get(node, name) {\n            accessorChain.push(name);\n            return fillerProxy;\n        }\n    });\n    return fillerProxy;\n};\nvar getAccessorChain = exports.getAccessorChain = function getAccessorChain(accessor) {\n    var accessorChain = [];\n    var accessorChainFiller = createAccessorChainFiller(accessorChain);\n    accessor(accessorChainFiller);\n    return accessorChain;\n};","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.setFilter = exports.setPrepend = exports.setAppend = exports.setMap = exports.set = exports.setFromAccessorChain = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _deepEqual = require('./deepEqual');\n\nvar _deepEqual2 = _interopRequireDefault(_deepEqual);\n\nvar _accessorChain = require('./accessorChain');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _toArray(arr) { return Array.isArray(arr) ? arr : Array.from(arr); }\n\nvar setFromAccessorChain = exports.setFromAccessorChain = function setFromAccessorChain(root, accessors) {\n    return function (value) {\n        var currentNode = root;\n        if (accessors.length === 0) {\n            var newNode = value instanceof Function ? value(currentNode) : value;\n            return (0, _deepEqual2.default)(currentNode, newNode) ? currentNode : newNode;\n        } else {\n            var _accessors = _toArray(accessors),\n                key = _accessors[0],\n                nextAccessors = _accessors.slice(1);\n\n            var newValue = setFromAccessorChain(currentNode[key], nextAccessors)(value);\n            return currentNode[key] === newValue ? currentNode : Array.isArray(currentNode) ? [].concat(_toConsumableArray(currentNode.slice(0, Number(key))), [newValue], _toConsumableArray(currentNode.slice(Number(key) + 1))) : _extends(Object.create(Object.getPrototypeOf(currentNode)), currentNode, _defineProperty({}, key, newValue));\n        }\n    };\n};\nvar set = exports.set = function set(root, accessor) {\n    return Array.isArray(accessor) ? setFromAccessorChain(root, accessor) : setFromAccessorChain(root, (0, _accessorChain.getAccessorChain)(accessor));\n};\nvar setMap = exports.setMap = function setMap(root, accessor) {\n    return function (func) {\n        return set(root, accessor)(function (arr) {\n            return arr.map(func);\n        });\n    };\n};\nvar setAppend = exports.setAppend = function setAppend(root, accessor) {\n    return function (item) {\n        return set(root, accessor)(function (arr) {\n            return [].concat(_toConsumableArray(arr), [item]);\n        });\n    };\n};\nvar setPrepend = exports.setPrepend = function setPrepend(root, accessor) {\n    return function (item) {\n        return set(root, accessor)(function (arr) {\n            return [item].concat(_toConsumableArray(arr));\n        });\n    };\n};\nvar setFilter = exports.setFilter = function setFilter(root, accessor) {\n    return function (predicate) {\n        return set(root, accessor)(function (arr) {\n            return arr.filter(predicate);\n        });\n    };\n};","/*!\n * Sherlock\n * Copyright (c) 2017 Neil Gupta\n * Version 1.3.6\n */\n\nvar Sherlock = (function() {\n\n  var patterns = {\n    rangeSplitters: /(\\bto\\b|\\-|\\b(?:un)?till?\\b|\\bthrough\\b|\\bthru\\b|\\band\\b|\\bends?\\b)/g,\n\n    // oct, october\n    months: \"\\\\b(jan(?:uary)?|feb(?:ruary)?|mar(?:ch)?|apr(?:il)?|may|jun(?:e)?|jul(?:y)?|aug(?:ust)?|sep(?:tember)?|oct(?:ober)?|nov(?:ember)?|dec(?:ember)?)\\\\b\",\n    // 3, 31, 31st, fifth\n    days: \"\\\\b(?:(?:(?:on )?the )(?=\\\\d\\\\d?(?:st|nd|rd|th)))?([1-2]\\\\d|3[0-1]|0?[1-9])(?:st|nd|rd|th)?(?:,|\\\\b)\",\n    // 2014, 1990\n    // Does not recognize 1930 for example because that could be confused with a valid time.\n    // Exceptions are made for years in 21st century.\n    years: \"\\\\b(20\\\\d{2}|\\\\d{2}[6-9]\\\\d)\\\\b\",\n\n    // 5/12/2014\n    shortForm: /\\b(0?[1-9]|1[0-2])\\/([1-2]\\d|3[0-1]|0?[1-9])\\/?(\\d{2,4})?\\b/,\n\n    // tue, tues, tuesday\n    weekdaysStr: \"\\\\b(sun|mon|tue(?:s)?|wed(?:nes)?|thu(?:rs?)?|fri|sat(?:ur)?)(?:day)?\\\\b\",\n    relativeDateStr: \"((?:next|last|this) (?:week|month|year)|tom(?:orrow)?|tmrw|tod(?:ay)?|(?:right )?now|tonight|day after (?:tom(?:orrow)?|tmrw)|yest(?:erday)?|day before yest(?:erday)?)\",\n    inRelativeDateStr: \"(\\\\d{1,4}|a) (day|week|month|year)s? ?(ago|old)?\",\n\n    inRelativeTime: /\\b(\\d{1,2} ?|a |an )(h(?:our)?|m(?:in(?:ute)?)?)s? ?(ago|old)?\\b/,\n    inMilliTime: /\\b(\\d+) ?(s(?:ec(?:ond)?)?|ms|millisecond)s? ?(ago|old)?\\b/,\n    midtime: /(?:@ ?)?\\b(?:at )?(dawn|morn(?:ing)?|noon|afternoon|evening|night|midnight)\\b/,\n    // 23:50, 0700, 1900\n    internationalTime: /\\b(?:(0[0-9]|1[3-9]|2[0-3]):?([0-5]\\d))\\b/,\n    // 5, 12pm, 5:00, 5:00pm, at 5pm, @3a\n    explicitTime: /(?:@ ?)?\\b(?:at |from )?(1[0-2]|[1-2]?[1-9])(?::?([0-5]\\d))? ?([ap]\\.?m?\\.?)?(?:o'clock)?\\b/,\n\n    more_than_comparator: /((?:more|greater|older|newer) than|after|before)/i,\n    less_than_comparator: /((?:less|fewer) than)/i,\n\n    // filler words must be preceded with a space to count\n    fillerWords: / (from|is|was|at|on|for|in|due(?! date)|(?:un)?till?)\\b/,\n    // less aggressive filler words regex to use when rangeSplitters are disabled\n    fillerWords2: / (was|is|due(?! date))\\b/\n  },\n\n  nowDate = null,\n\n  getNow = function() {\n    if (nowDate)\n      return new Date(nowDate.getTime());\n    else\n      return new Date();\n  },\n\n  readConfig = function(config_var) {\n    return (typeof Watson !== 'undefined' && Watson.config) ? Watson.config[config_var] : null;\n  },\n\n  parser = function(str, time, startTime) {\n    var ret = {},\n      dateMatch = false,\n      timeMatch = false,\n      strNummed = helpers.strToNum(str);\n\n    // parse date\n    if (dateMatch = matchDate(strNummed, time, startTime)) {\n      strNummed = strNummed.replace(new RegExp(dateMatch), '');\n      str = str.replace(new RegExp(helpers.numToStr(dateMatch)), '');\n    }\n\n    // parse time\n    if (timeMatch = matchTime(strNummed, time, startTime))\n      str = str.replace(new RegExp(helpers.numToStr(timeMatch)), '');\n\n    ret.eventTitle = str;\n\n    // if time data not given, then this is an all day event\n    ret.isAllDay = !!(dateMatch && !timeMatch && !dateMatch.match(/^(?:right )?now$|^tonight$/));\n\n    // check if date was parsed\n    ret.isValidDate = !!(dateMatch || timeMatch);\n\n    return ret;\n  },\n\n  matchTime = function(str, time, startTime) {\n    var match, matchConfidence = 0, matchedString = false, matchedHour, matchedMin, matchedHasMeridian;\n\n    if (match = str.match(new RegExp(patterns.explicitTime.source, \"g\"))) {\n      // if multiple matches found, pick the best one\n      match = match.sort(function (a, b) {\n        var aScore = a.trim().length,\n            bScore = b.trim().length;\n        // Weight matches that include full meridian\n        if (a.match(/(?:a|p).?m.?/))\n          aScore += 20;\n        if (b.match(/(?:a|p).?m.?/))\n          bScore += 20;\n        return bScore - aScore;\n      })[0].trim();\n\n      if (match.length <= 2 && str.trim().length > 2)\n        matchConfidence = 0;\n      else {\n        matchConfidence = match.length;\n        match = match.match(patterns.explicitTime);\n\n        var hour = parseInt(match[1])\n        , min = match[2] || 0\n        , meridian = match[3];\n\n        if (meridian) {\n          // meridian is included, adjust hours accordingly\n          if (meridian.indexOf('p') === 0 && hour != 12)\n            hour += 12;\n          else if (meridian.indexOf('a') === 0 && hour == 12)\n            hour = 0;\n          matchConfidence += 20;\n        } else if (hour < 12 && (hour < 7 || hour <= time.getHours()))\n          // meridian is not included, adjust any ambiguous times\n          // if you type 3, it will default to 3pm\n          // if you type 11 at 5am, it will default to am,\n          // but if you type it at 2pm, it will default to pm\n          hour += 12;\n\n        matchedHour = hour;\n        matchedMin = min;\n        matchedHasMeridian = !!meridian;\n        matchedString = match[0];\n      }\n    }\n\n    var useLowConfidenceMatchedTime = function() {\n      if (matchedString) {\n        time.setHours(matchedHour, matchedMin, 0);\n        time.hasMeridian = matchedHasMeridian;\n      }\n      return matchedString;\n    };\n\n    if (matchConfidence < 4) {\n      if (match = str.match(patterns.inRelativeTime)) {\n        // if we matched 'a' or 'an', set the number to 1\n        if (isNaN(match[1]))\n          match[1] = 1;\n\n        if (match[3])\n          match[1] = parseInt(match[1])*-1;\n\n        switch(match[2].substring(0, 1)) {\n          case \"h\":\n            time.setHours(time.getHours() + parseInt(match[1]));\n            return match[0];\n          case \"m\":\n            time.setMinutes(time.getMinutes() + parseInt(match[1]));\n            return match[0];\n          default:\n            return useLowConfidenceMatchedTime();\n        }\n      } else if (match = str.match(patterns.inMilliTime)) {\n        if (match[3])\n          match[1] = parseInt(match[1])*-1;\n\n        switch(match[2].substring(0, 1)) {\n          case \"s\":\n            time.setSeconds(time.getSeconds() + parseInt(match[1]));\n            return match[0];\n          case \"m\":\n            time.setMilliseconds(time.getMilliseconds() + parseInt(match[1]));\n            return match[0];\n          default:\n            return useLowConfidenceMatchedTime();\n        }\n      } else if (match = str.match(patterns.midtime)) {\n        switch(match[1]) {\n          case \"dawn\":\n            time.setHours(5, 0, 0);\n            time.hasMeridian = true;\n            return match[0];\n          case \"morn\":\n          case \"morning\":\n            time.setHours(8, 0, 0);\n            time.hasMeridian = true;\n            return match[0];\n          case \"noon\":\n            time.setHours(12, 0, 0);\n            time.hasMeridian = true;\n            return match[0];\n          case \"afternoon\":\n            time.setHours(14, 0, 0);\n            time.hasMeridian = true;\n            return match[0];\n          case \"evening\":\n            time.setHours(19, 0, 0);\n            time.hasMeridian = true;\n            return match[0];\n          case \"night\":\n            time.setHours(21, 0, 0);\n            time.hasMeridian = true;\n            return match[0];\n          case \"midnight\":\n            time.setHours(0, 0, 0);\n            time.hasMeridian = true;\n            return match[0];\n          default:\n            return useLowConfidenceMatchedTime();\n        }\n      } else if (match = str.match(patterns.internationalTime)) {\n        time.setHours(match[1], match[2], 0);\n        time.hasMeridian = true;\n        return match[0];\n      } else\n        return useLowConfidenceMatchedTime();\n    } else\n      return useLowConfidenceMatchedTime();\n  },\n\n  matchDate = function(str, time, startTime) {\n    var match;\n    if (match = str.match(patterns.monthDay)) {\n      if (match[3]) {\n        time.setFullYear(match[3], helpers.changeMonth(match[1]), match[2]);\n        time.hasYear = true;\n      }\n      else\n        time.setMonth(helpers.changeMonth(match[1]), match[2]);\n      return match[0];\n    } else if (match = str.match(patterns.dayMonth)) {\n      if (match[3]) {\n        time.setFullYear(match[3], helpers.changeMonth(match[2]), match[1]);\n        time.hasYear = true;\n      }\n      else\n        time.setMonth(helpers.changeMonth(match[2]), match[1]);\n      return match[0];\n    } else if (match = str.match(patterns.shortForm)) {\n      var yearStr = match[3], year = null;\n      if (yearStr)\n        year = parseInt(yearStr);\n      if (year && yearStr.length < 4)\n        // if only 2 digits are given, assume years above 50 are in the 20th century, otherwise 21st century\n        year += year > 50 ? 1900 : 2000;\n      if (year) {\n        time.setFullYear(year, match[1] - 1, match[2]);\n        time.hasYear = true;\n      }\n      else\n        time.setMonth(match[1] - 1, match[2]);\n      return match[0];\n    } else if (match = str.match(patterns.oxtDays) || str.match(patterns.oxtDaysUK)) {\n      switch (match[1].substr(0, 3)) {\n        case \"sun\":\n          helpers.changeDay(time, 0, \"oxt\");\n          return match[0];\n        case \"mon\":\n          helpers.changeDay(time, 1, \"oxt\");\n          return match[0];\n        case \"tue\":\n          helpers.changeDay(time, 2, \"oxt\");\n          return match[0];\n        case \"wed\":\n          helpers.changeDay(time, 3, \"oxt\");\n          return match[0];\n        case \"thu\":\n          helpers.changeDay(time, 4, \"oxt\");\n          return match[0];\n        case \"fri\":\n          helpers.changeDay(time, 5, \"oxt\");\n          return match[0];\n        case \"sat\":\n          helpers.changeDay(time, 6, \"oxt\");\n          return match[0];\n        default:\n          return false;\n      }\n    } else if (match = str.match(patterns.weekdays)) {\n      switch (match[2].substr(0, 3)) {\n        case \"sun\":\n          helpers.changeDay(time, 0, match[1]);\n          return match[0];\n        case \"mon\":\n          helpers.changeDay(time, 1, match[1]);\n          return match[0];\n        case \"tue\":\n          helpers.changeDay(time, 2, match[1]);\n          return match[0];\n        case \"wed\":\n          helpers.changeDay(time, 3, match[1]);\n          return match[0];\n        case \"thu\":\n          helpers.changeDay(time, 4, match[1]);\n          return match[0];\n        case \"fri\":\n          helpers.changeDay(time, 5, match[1]);\n          return match[0];\n        case \"sat\":\n          helpers.changeDay(time, 6, match[1]);\n          return match[0];\n        default:\n          return false;\n      }\n    } else if (match = str.match(patterns.inRelativeDateFromRelativeDate)) {\n      if (helpers.relativeDateMatcher(match[4], time) && helpers.inRelativeDateMatcher(match[1], match[2], match[3], time))\n        return match[0];\n      else\n        return false;\n    } else if (match = str.match(patterns.relativeDate)) {\n      if (helpers.relativeDateMatcher(match[1], time))\n        return match[0];\n      else\n        return false;\n    } else if (match = str.match(patterns.inRelativeDate)) {\n      if (helpers.inRelativeDateMatcher(match[1], match[2], match[3], time))\n        return match[0];\n      else\n        return false;\n    } else if (match = str.match(new RegExp(patterns.days, \"g\"))) {\n      // if multiple matches found, pick the best one\n      match = match.sort(function (a, b) { return b.trim().length - a.trim().length; })[0].trim();\n      // check if the possible date match meets our reasonable assumptions...\n      // if the match doesn't start with 'on',\n      if ((match.indexOf('on') !== 0 &&\n        // and if the match doesn't start with 'the' and end with a comma,\n        !(match.indexOf('the') === 0 && match.indexOf(',', match.length - 1) !== -1) &&\n        // and if the match isn't at the end of the overall input, then drop it.\n        str.indexOf(match, str.length - match.length - 1) === -1) ||\n      // But if one of those is true, make sure it passes these other checks too...\n        // if this is an end date and the start date isn't an all day value,\n        (!(startTime && startTime.isAllDay) &&\n        // and if this match is too short to mean something,\n        match.length <= 2))\n        // then drop it.\n        return false;\n      match = match.match(patterns.daysOnly);\n\n      var month = time.getMonth(),\n        day = match[1];\n\n      // if this date is in the past, move it to next month\n      if (day < time.getDate())\n        month++;\n\n      time.setMonth(month, day);\n      return match[0];\n    } else\n      return false;\n  },\n\n  // Make some intelligent assumptions of what was meant, even when given incomplete information\n  makeAdjustments = function(start, end, isAllDay, str, ret) {\n    var now = getNow();\n\n    if (end) {\n      if (start > end && end > now && helpers.isSameDay(start, end) && helpers.isSameDay(start, now)) {\n        if (start.hasMeridian)\n          // we explicitly set the meridian, so don't mess with the hours\n          start.setDate(start.getDate() - 1);\n        else {\n          // we are dealing with a time range that is today with start > end\n          // (ie. 9pm - 5pm when we want 9am - 5pm), roll back 12 hours.\n          start.setHours(start.getHours() - 12);\n          // if start is still higher than end, that means we probably have\n          // 9am - 5am, so roll back another 12 hours to get 9pm yesterday - 5am today\n          if (start > end)\n            start.setHours(start.getHours() - 12);\n        }\n      }\n\n      else if (start > end) {\n        end.setDate(start.getDate() + 1);\n      }\n\n      else if (end < now && str.indexOf(\" was \") === -1 && helpers.monthDiff(end, now) >= 3 && !end.hasYear && !start.hasYear) {\n        end.setFullYear(end.getFullYear() + 1);\n        start.setFullYear(start.getFullYear() + 1);\n      }\n\n    } else if (start) {\n      if (start <= now && !start.hasYear && !str.match(/was|ago|old\\b/)) {\n        if (helpers.isSameDay(start, now) && !isAllDay) {\n          if (start.hasMeridian || start.getHours() < 19)\n            // either we explicitly set the meridian or the time\n            // is less than 7pm, so don't mess with the hours\n            start.setDate(start.getDate() + 1);\n          else {\n            start.setHours(start.getHours() + 12);\n            // if start is still older than now, roll forward a day instead\n            if (start <= now) {\n              start.setHours(start.getHours() - 12);\n              start.setDate(start.getDate() + 1);\n            }\n          }\n        } else if (helpers.monthDiff(start, now) >= 3)\n          start.setFullYear(start.getFullYear() + 1);\n      }\n\n      // check for open ranges (more than...)\n      if (ret.eventTitle.match(patterns.more_than_comparator)) {\n        if ((start <= now && (!helpers.isSameDay(start, now) || str.match(/ago|old\\b/)) &&\n            !ret.eventTitle.match(/after|newer/i)) ||\n            ret.eventTitle.match(/older|before/i)) {\n          ret.endDate = new Date(start.getTime());\n          ret.startDate = new Date(1900, 0, 1, 0, 0, 0, 0);\n        } else {\n          ret.endDate = new Date(3000, 0, 1, 0, 0, 0, 0);\n        }\n        ret.eventTitle = ret.eventTitle.replace(patterns.more_than_comparator, '');\n      }\n      // check for closed ranges (less than...)\n      else if (ret.eventTitle.match(patterns.less_than_comparator)) {\n        if (start <= now) {\n          if (helpers.isSameDay(start, now) && !str.match(/ago|old\\b/)) {\n            // make an exception for \"less than today\" or \"less than now\"\n            ret.endDate = new Date(start.getTime());\n            ret.startDate = new Date(1900, 0, 1, 0, 0, 0, 0);\n          } else\n            ret.endDate = new Date(now.getTime());\n        } else {\n          ret.endDate = new Date(start.getTime());\n          ret.startDate = new Date(now.getTime());\n        }\n        ret.eventTitle = ret.eventTitle.replace(patterns.less_than_comparator, '');\n      }\n    }\n  },\n\n  helpers = {\n    relativeDateMatcher: function(match, time) {\n      var now = getNow();\n      switch(match) {\n        case \"next week\":\n          time.setFullYear(now.getFullYear(), now.getMonth(), now.getDate() + 7);\n          time.hasYear = true;\n          return true;\n        case \"next month\":\n          time.setFullYear(now.getFullYear(), now.getMonth() + 1, now.getDate());\n          time.hasYear = true;\n          return true;\n        case \"next year\":\n          time.setFullYear(now.getFullYear() + 1, now.getMonth(), now.getDate());\n          time.hasYear = true;\n          return true;\n        case \"last week\":\n          time.setFullYear(now.getFullYear(), now.getMonth(), now.getDate() - 7);\n          time.hasYear = true;\n          return true;\n        case \"last month\":\n          time.setFullYear(now.getFullYear(), now.getMonth() - 1, now.getDate());\n          time.hasYear = true;\n          return true;\n        case \"last year\":\n          time.setFullYear(now.getFullYear() - 1, now.getMonth(), now.getDate());\n          time.hasYear = true;\n          return true;\n        case \"tom\":\n        case \"tmrw\":\n        case \"tomorrow\":\n          time.setFullYear(now.getFullYear(), now.getMonth(), now.getDate() + 1);\n          time.hasYear = true;\n          return true;\n        case \"day after tom\":\n        case \"day after tmrw\":\n        case \"day after tomorrow\":\n          time.setFullYear(now.getFullYear(), now.getMonth(), now.getDate() + 2);\n          time.hasYear = true;\n          return true;\n        case \"this week\":\n        case \"this month\":\n        case \"this year\": // this week|month|year is pretty meaningless, but let's include it so that it parses as today\n        case \"tod\":\n        case \"today\":\n          time.setFullYear(now.getFullYear(), now.getMonth(), now.getDate());\n          time.hasYear = true;\n          return true;\n        case \"now\":\n        case \"right now\":\n        case \"tonight\":\n          time.setFullYear(now.getFullYear(), now.getMonth(), now.getDate());\n          time.setHours(now.getHours(), now.getMinutes(), now.getSeconds(), 0);\n          if (match === \"tonight\" && time.getHours() < 21)\n            time.setHours(21, 0, 0, 0); // Assume \"tonight\" starts at 9pm\n          time.hasMeridian = true;\n          time.hasYear = true;\n          return true;\n        case \"yest\":\n        case \"yesterday\":\n          time.setFullYear(now.getFullYear(), now.getMonth(), now.getDate() - 1);\n          time.hasYear = true;\n          return true;\n        case \"day before yest\":\n        case \"day before yesterday\":\n          time.setFullYear(now.getFullYear(), now.getMonth(), now.getDate() - 2);\n          time.hasYear = true;\n          return true;\n        default:\n          return false;\n      }\n    },\n\n    inRelativeDateMatcher: function(num, scale, ago, time) {\n      // if we matched 'a' or 'an', set the number to 1\n      if (isNaN(num))\n        num = 1;\n      else\n        num = parseInt(num);\n\n      if (ago)\n        num = num*-1;\n\n      switch(scale) {\n        case \"day\":\n          time.setDate(time.getDate() + num);\n          time.hasYear = true;\n          return true;\n        case \"week\":\n          time.setDate(time.getDate() + num*7);\n          time.hasYear = true;\n          return true;\n        case \"month\":\n          time.setMonth(time.getMonth() + num);\n          time.hasYear = true;\n          return true;\n        case \"year\":\n          time.setFullYear(time.getFullYear() + num);\n          time.hasYear = true;\n          return true;\n        default:\n          return false;\n      }\n    },\n\n    // convert month string to number\n    changeMonth: function(month) {\n      return this.monthToInt[month.substr(0, 3)];\n    },\n\n    // find the nearest future date that is on the given weekday\n    changeDay: function(time, newDay, hasNext) {\n      var diff = 7 - time.getDay() + newDay;\n      if ((diff > 7 && hasNext === undefined) || hasNext === \"last\")\n        diff -= 7;\n      if (diff >= 0 && hasNext === \"last\")\n        // If entering \"last saturday\" on a Saturday, for example,\n        // diff will be 0 when it should be -7\n        diff -= 7;\n      if (hasNext === \"oxt\")\n        diff += 7;\n\n      time.setDate(time.getDate() + diff);\n    },\n\n    monthDiff: function(d1, d2) {\n      var months;\n      months = (d2.getFullYear() - d1.getFullYear()) * 12;\n      months -= d1.getMonth() + 1;\n      months += d2.getMonth() + 1;\n      return months <= 0 ? 0 : months;\n    },\n\n    escapeRegExp: function(str) {\n      return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\");\n    },\n\n    isSameDay: function(date1, date2) {\n      return date1.getMonth() === date2.getMonth() && date1.getDate() === date2.getDate() && date1.getFullYear() === date2.getFullYear();\n    },\n\n    monthToInt: {\"jan\": 0, \"feb\": 1, \"mar\": 2, \"apr\": 3, \"may\": 4, \"jun\": 5, \"jul\": 6, \"aug\": 7, \"sep\": 8, \"oct\": 9, \"nov\": 10, \"dec\": 11},\n\n    // mapping of words to numbers\n    wordsToInt: {\n      'one'   : 1,\n      'first'   : 1,\n      'two'   : 2,\n      'second'  : 2,\n      'three'   : 3,\n      'third'   : 3,\n      'four'    : 4,\n      'fourth'  : 4,\n      'five'    : 5,\n      'fifth'   : 5,\n      'six'   : 6,\n      'sixth'   : 6,\n      'seven'   : 7,\n      'seventh' : 7,\n      'eight'   : 8,\n      'eighth'  : 8,\n      'nine'    : 9,\n      'ninth'   : 9,\n      'ten'   : 10,\n      'tenth'   : 10\n    },\n\n    // mapping of number to words\n    intToWords: [\n      'one|first',\n      'two|second',\n      'three|third',\n      'four|fourth',\n      'five|fifth',\n      'six|sixth',\n      'seven|seventh',\n      'eight|eighth',\n      'nine|ninth',\n      'ten|tenth'\n    ],\n\n    // converts all the words in a string into numbers, such as four -> 4\n    strToNum: function(str) {\n      return str.replace(patterns.digit, function(val) {\n        var out = helpers.wordsToInt[val];\n        if (val.indexOf('th', val.length - 2) !== -1)\n          out += 'th';\n        else if (val.indexOf('st', val.length - 2) !== -1)\n          out += 'st';\n        else if (val.indexOf('nd', val.length - 2) !== -1)\n          out += 'nd';\n        else if (val.indexOf('rd', val.length - 2) !== -1)\n          out += 'rd';\n        return out;\n      });\n    },\n\n    // converts all the numbers in a string into regex for number|word, such as 4 -> 4|four\n    numToStr: function(str) {\n      return str.replace(/((?:[1-9]|10)(?:st|nd|rd|th)?)/g, function(val) {\n        return '(?:' + val + '|' + helpers.intToWords[parseInt(val) - 1] + ')';\n      });\n    }\n  };\n\n  // may 5, may 5th\n  patterns.monthDay = new RegExp(patterns.months + \" \"  + patterns.days + \"(?: \" + patterns.years + \")?\");\n  // 5th may, 5 may\n  patterns.dayMonth = new RegExp(patterns.days + \"(?: (?:day )?of)? \" + patterns.months + \"(?: \" + patterns.years + \")?\");\n  // 5, 5th\n  patterns.daysOnly = new RegExp(patterns.days);\n  patterns.digit = new RegExp(\"\\\\b(\" + helpers.intToWords.join(\"|\") + \")\\\\b\", \"g\");\n  // today, tomorrow, day after tomorrow\n  patterns.relativeDate = new RegExp(\"\\\\b\" + patterns.relativeDateStr + \"\\\\b\");\n  // in 2 weeks\n  patterns.inRelativeDate = new RegExp(\"\\\\b\" + patterns.inRelativeDateStr + \"\\\\b\");\n  // 2 weeks from tomorrow\n  patterns.inRelativeDateFromRelativeDate = new RegExp(\"\\\\b\" + patterns.inRelativeDateStr + \" from \" + patterns.relativeDateStr + \"\\\\b\");\n\n  // next Friday, thu\n  patterns.weekdays = new RegExp(\"(?:(next|last) (?:week (?:on )?)?)?\" + patterns.weekdaysStr);\n  // oxt monday\n  patterns.oxtDays = new RegExp(\"(?:\\\\boxt|\\\\bweek next) \" + patterns.weekdaysStr);\n  // thursday week\n  patterns.oxtDaysUK = new RegExp(patterns.weekdaysStr + \" week\\\\b\");\n\n  if(!String.prototype.trim) {\n    String.prototype.trim = function () {\n      return this.replace(/^\\s+|\\s+$/g,'');\n    };\n  }\n\n  return {\n    // parses a string and returns an object defining the basic event\n    // with properties: eventTitle, startDate, endDate, isAllDay\n    // plus anything Watson adds on...\n    parse: function(str) {\n      // check for null input\n      if (str === null) str = '';\n\n      var date = getNow(),\n        // Check if Watson is around. If not, pretend like he is to keep Sherlock company.\n        result = (typeof Watson !== 'undefined') ? Watson.preprocess(str) : [str, {}],\n        str = result[0],\n        ret = result[1],\n        // token the string to start and stop times\n        tokens = readConfig(\"disableRanges\") ? [str.toLowerCase()] : str.toLowerCase().split(patterns.rangeSplitters);\n\n      patterns.rangeSplitters.lastIndex = 0;\n\n      // normalize all dates to 0 milliseconds\n      date.setMilliseconds(0);\n\n      while (!ret.startDate) {\n        // parse the start date\n        if ((result = parser(tokens[0], date, null)) !== null) {\n          if (result.isAllDay)\n            // set to midnight\n            date.setHours(0, 0, 0);\n\n          ret.isAllDay = result.isAllDay;\n          ret.eventTitle = result.eventTitle;\n          ret.startDate = result.isValidDate ? date : null;\n        }\n\n        // if no time\n        if (!ret.startDate && tokens.length >= 3) {\n          // join the next 2 tokens to the current one\n          var tokensTmp = [tokens[0] + tokens[1] + tokens[2]];\n          for (var k = 3; k < tokens.length; k++) {\n            tokensTmp.push(tokens[k]);\n          }\n          tokens = tokensTmp;\n        } else\n          break;\n      }\n\n      // parse the 2nd half of the date range, if it exists\n      while (!ret.endDate) {\n        if (tokens.length > 1) {\n          date = new Date(date.getTime());\n          // parse the end date\n          if ((result = parser(tokens[2], date, ret)) !== null) {\n            if (ret.isAllDay)\n              // set to midnight\n              date.setHours(0, 0, 0);\n\n            if (result.eventTitle.length > ret.eventTitle.length)\n              ret.eventTitle = result.eventTitle;\n\n            ret.endDate = result.isValidDate ? date : null;\n          }\n        }\n\n        if (!ret.endDate) {\n          if (tokens.length >= 4) {\n            // join the next 2 tokens to the current one\n            var tokensTmp = [tokens[0], tokens[1], tokens[2] + tokens[3] + tokens[4]];\n            for (var k = 5; k < tokens.length; k++) {\n              tokensTmp.push(tokens[k]);\n            }\n            tokens = tokensTmp;\n          } else {\n            ret.endDate = null;\n            break;\n          }\n        }\n      }\n\n      makeAdjustments(ret.startDate, ret.endDate, ret.isAllDay, str, ret);\n\n      // get capitalized version of title\n      if (ret.eventTitle) {\n        var fillerWords = readConfig(\"disableRanges\") ? patterns.fillerWords2 : patterns.fillerWords;\n        ret.eventTitle = ret.eventTitle.split(fillerWords)[0].trim();\n        ret.eventTitle = ret.eventTitle.replace(/(?:^| )(?:\\.|-$|by$|in$|at$|from$|on$|starts?$|for$|(?:un)?till?$|!|,|;)+/g, '').replace(/ +/g, ' ').trim();\n        var match = str.match(new RegExp(helpers.escapeRegExp(ret.eventTitle), \"i\"));\n        if (match) {\n          ret.eventTitle = match[0].replace(/ +/g, ' ').trim(); // replace multiple spaces\n          if (ret.eventTitle == '')\n            ret.eventTitle = null;\n        }\n      } else\n        ret.eventTitle = null;\n\n      if (typeof Watson !== 'undefined')\n        Watson.postprocess(ret);\n\n      return ret;\n    },\n\n    // Sets what time Sherlock thinks it is right now, regardless of the actual system time.\n    // Useful for debugging different times. Pass a Date object to set 'now' to a time of your choosing.\n    // Don't pass in anything to reset 'now' to the real time.\n    _setNow: function(newDate) {\n      nowDate = newDate;\n    }\n  };\n})();\n\n// Add AMD compatibility.\nif (typeof define === 'function' && define.amd) {\n  define(Sherlock);\n}\n// Add CommonJS compatibility.\nelse if (typeof module !== 'undefined' && module.exports) {\n  module.exports = Sherlock;\n}\n","'use strict';\nmodule.exports = str => encodeURIComponent(str).replace(/[!'()*]/g, x => `%${x.charCodeAt(0).toString(16).toUpperCase()}`);\n","'use strict';\nvar token = '%[a-f0-9]{2}';\nvar singleMatcher = new RegExp(token, 'gi');\nvar multiMatcher = new RegExp('(' + token + ')+', 'gi');\n\nfunction decodeComponents(components, split) {\n\ttry {\n\t\t// Try to decode the entire string first\n\t\treturn decodeURIComponent(components.join(''));\n\t} catch (err) {\n\t\t// Do nothing\n\t}\n\n\tif (components.length === 1) {\n\t\treturn components;\n\t}\n\n\tsplit = split || 1;\n\n\t// Split the array in 2 parts\n\tvar left = components.slice(0, split);\n\tvar right = components.slice(split);\n\n\treturn Array.prototype.concat.call([], decodeComponents(left), decodeComponents(right));\n}\n\nfunction decode(input) {\n\ttry {\n\t\treturn decodeURIComponent(input);\n\t} catch (err) {\n\t\tvar tokens = input.match(singleMatcher);\n\n\t\tfor (var i = 1; i < tokens.length; i++) {\n\t\t\tinput = decodeComponents(tokens, i).join('');\n\n\t\t\ttokens = input.match(singleMatcher);\n\t\t}\n\n\t\treturn input;\n\t}\n}\n\nfunction customDecodeURIComponent(input) {\n\t// Keep track of all the replacements and prefill the map with the `BOM`\n\tvar replaceMap = {\n\t\t'%FE%FF': '\\uFFFD\\uFFFD',\n\t\t'%FF%FE': '\\uFFFD\\uFFFD'\n\t};\n\n\tvar match = multiMatcher.exec(input);\n\twhile (match) {\n\t\ttry {\n\t\t\t// Decode as big chunks as possible\n\t\t\treplaceMap[match[0]] = decodeURIComponent(match[0]);\n\t\t} catch (err) {\n\t\t\tvar result = decode(match[0]);\n\n\t\t\tif (result !== match[0]) {\n\t\t\t\treplaceMap[match[0]] = result;\n\t\t\t}\n\t\t}\n\n\t\tmatch = multiMatcher.exec(input);\n\t}\n\n\t// Add `%C2` at the end of the map to make sure it does not replace the combinator before everything else\n\treplaceMap['%C2'] = '\\uFFFD';\n\n\tvar entries = Object.keys(replaceMap);\n\n\tfor (var i = 0; i < entries.length; i++) {\n\t\t// Replace all decoded components\n\t\tvar key = entries[i];\n\t\tinput = input.replace(new RegExp(key, 'g'), replaceMap[key]);\n\t}\n\n\treturn input;\n}\n\nmodule.exports = function (encodedURI) {\n\tif (typeof encodedURI !== 'string') {\n\t\tthrow new TypeError('Expected `encodedURI` to be of type `string`, got `' + typeof encodedURI + '`');\n\t}\n\n\ttry {\n\t\tencodedURI = encodedURI.replace(/\\+/g, ' ');\n\n\t\t// Try the built in decoder first\n\t\treturn decodeURIComponent(encodedURI);\n\t} catch (err) {\n\t\t// Fallback to a more advanced decoder\n\t\treturn customDecodeURIComponent(encodedURI);\n\t}\n};\n","'use strict';\nconst strictUriEncode = require('strict-uri-encode');\nconst decodeComponent = require('decode-uri-component');\n\nfunction encoderForArrayFormat(options) {\n\tswitch (options.arrayFormat) {\n\t\tcase 'index':\n\t\t\treturn (key, value, index) => {\n\t\t\t\treturn value === null ? [\n\t\t\t\t\tencode(key, options),\n\t\t\t\t\t'[',\n\t\t\t\t\tindex,\n\t\t\t\t\t']'\n\t\t\t\t].join('') : [\n\t\t\t\t\tencode(key, options),\n\t\t\t\t\t'[',\n\t\t\t\t\tencode(index, options),\n\t\t\t\t\t']=',\n\t\t\t\t\tencode(value, options)\n\t\t\t\t].join('');\n\t\t\t};\n\t\tcase 'bracket':\n\t\t\treturn (key, value) => {\n\t\t\t\treturn value === null ? [encode(key, options), '[]'].join('') : [\n\t\t\t\t\tencode(key, options),\n\t\t\t\t\t'[]=',\n\t\t\t\t\tencode(value, options)\n\t\t\t\t].join('');\n\t\t\t};\n\t\tdefault:\n\t\t\treturn (key, value) => {\n\t\t\t\treturn value === null ? encode(key, options) : [\n\t\t\t\t\tencode(key, options),\n\t\t\t\t\t'=',\n\t\t\t\t\tencode(value, options)\n\t\t\t\t].join('');\n\t\t\t};\n\t}\n}\n\nfunction parserForArrayFormat(options) {\n\tlet result;\n\n\tswitch (options.arrayFormat) {\n\t\tcase 'index':\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tresult = /\\[(\\d*)\\]$/.exec(key);\n\n\t\t\t\tkey = key.replace(/\\[\\d*\\]$/, '');\n\n\t\t\t\tif (!result) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = {};\n\t\t\t\t}\n\n\t\t\t\taccumulator[key][result[1]] = value;\n\t\t\t};\n\t\tcase 'bracket':\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tresult = /(\\[\\])$/.exec(key);\n\t\t\t\tkey = key.replace(/\\[\\]$/, '');\n\n\t\t\t\tif (!result) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = [value];\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [].concat(accumulator[key], value);\n\t\t\t};\n\t\tdefault:\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [].concat(accumulator[key], value);\n\t\t\t};\n\t}\n}\n\nfunction encode(value, options) {\n\tif (options.encode) {\n\t\treturn options.strict ? strictUriEncode(value) : encodeURIComponent(value);\n\t}\n\n\treturn value;\n}\n\nfunction decode(value, options) {\n\tif (options.decode) {\n\t\treturn decodeComponent(value);\n\t}\n\n\treturn value;\n}\n\nfunction keysSorter(input) {\n\tif (Array.isArray(input)) {\n\t\treturn input.sort();\n\t}\n\n\tif (typeof input === 'object') {\n\t\treturn keysSorter(Object.keys(input))\n\t\t\t.sort((a, b) => Number(a) - Number(b))\n\t\t\t.map(key => input[key]);\n\t}\n\n\treturn input;\n}\n\nfunction extract(input) {\n\tconst queryStart = input.indexOf('?');\n\tif (queryStart === -1) {\n\t\treturn '';\n\t}\n\treturn input.slice(queryStart + 1);\n}\n\nfunction parse(input, options) {\n\toptions = Object.assign({decode: true, arrayFormat: 'none'}, options);\n\n\tconst formatter = parserForArrayFormat(options);\n\n\t// Create an object with no prototype\n\tconst ret = Object.create(null);\n\n\tif (typeof input !== 'string') {\n\t\treturn ret;\n\t}\n\n\tinput = input.trim().replace(/^[?#&]/, '');\n\n\tif (!input) {\n\t\treturn ret;\n\t}\n\n\tfor (const param of input.split('&')) {\n\t\tlet [key, value] = param.replace(/\\+/g, ' ').split('=');\n\n\t\t// Missing `=` should be `null`:\n\t\t// http://w3.org/TR/2012/WD-url-20120524/#collect-url-parameters\n\t\tvalue = value === undefined ? null : decode(value, options);\n\n\t\tformatter(decode(key, options), value, ret);\n\t}\n\n\treturn Object.keys(ret).sort().reduce((result, key) => {\n\t\tconst value = ret[key];\n\t\tif (Boolean(value) && typeof value === 'object' && !Array.isArray(value)) {\n\t\t\t// Sort object keys, not values\n\t\t\tresult[key] = keysSorter(value);\n\t\t} else {\n\t\t\tresult[key] = value;\n\t\t}\n\n\t\treturn result;\n\t}, Object.create(null));\n}\n\nexports.extract = extract;\nexports.parse = parse;\n\nexports.stringify = (obj, options) => {\n\tconst defaults = {\n\t\tencode: true,\n\t\tstrict: true,\n\t\tarrayFormat: 'none'\n\t};\n\n\toptions = Object.assign(defaults, options);\n\n\tif (options.sort === false) {\n\t\toptions.sort = () => {};\n\t}\n\n\tconst formatter = encoderForArrayFormat(options);\n\n\treturn obj ? Object.keys(obj).sort(options.sort).map(key => {\n\t\tconst value = obj[key];\n\n\t\tif (value === undefined) {\n\t\t\treturn '';\n\t\t}\n\n\t\tif (value === null) {\n\t\t\treturn encode(key, options);\n\t\t}\n\n\t\tif (Array.isArray(value)) {\n\t\t\tconst result = [];\n\n\t\t\tfor (const value2 of value.slice()) {\n\t\t\t\tif (value2 === undefined) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tresult.push(formatter(key, value2, result.length));\n\t\t\t}\n\n\t\t\treturn result.join('&');\n\t\t}\n\n\t\treturn encode(key, options) + '=' + encode(value, options);\n\t}).filter(x => x.length > 0).join('&') : '';\n};\n\nexports.parseUrl = (input, options) => {\n\treturn {\n\t\turl: input.split('?')[0] || '',\n\t\tquery: parse(extract(input), options)\n\t};\n};\n","import { set } from \"monolite\";\nimport sherlock from \"sherlockjs\";\nimport queryString from \"query-string\";\n\nconst compose = (...fns) =>\n  fns\n    .reverse()\n    .reduce((prevFn, nextFn) => value => nextFn(prevFn(value)), value => value);\n\nconst toTruncatedDate = (date: Date) => toFormattedDate(date).substr(0, 8);\n\nconst toFormattedDate = (date: Date) =>\n  date.toISOString().replace(/-|:|\\.\\d\\d\\d/g, \"\");\n\nconst dayAndDayAfter = (date: Date) => {\n  let dayAfter = new Date();\n  dayAfter.setDate(date.getDate() + 1);\n  dayAfter.setHours(0, 0, 0);\n  return [date, dayAfter];\n};\n\nconst dayAndHourLater = (date: Date) => {\n  let hourLater = new Date();\n  hourLater.setDate(date.getDate());\n  hourLater.setTime(date.getTime() + 1 * 60 * 60 * 1000);\n  return [date, hourLater];\n};\n\nconst renderGuess = text => {\n  const parsedResult = sherlock.parse(text);\n  const { eventTitle, startDate, endDate, isAllDay } = parsedResult;\n\n  const event = {\n    details: text,\n    action: \"TEMPLATE\",\n    text: eventTitle\n  };\n  let workingDates = [startDate, endDate];\n  if (startDate === null) {\n    return \"<div>Sorry, we can't find any dates in the selection!</div>\";\n  }\n  if (endDate === null) {\n    workingDates = dayAndHourLater(startDate);\n  }\n  if (isAllDay) {\n    workingDates = dayAndDayAfter(startDate);\n  }\n  const dates = workingDates\n    .filter(date => date instanceof Date)\n    .map(date => {\n      if (isAllDay) {\n        return toTruncatedDate(date);\n      } else {\n        return toFormattedDate(date);\n      }\n    })\n    .join(\"/\");\n  const query = queryString.stringify({ ...event, dates });\n  const [start, end] = workingDates;\n  return `\n<p>Your event:</p>\n<p>Title: ${eventTitle}</p>\n<p>Start Date: ${start}</p>\n<p>End Date: ${end}</p>\n<a target=\"_blank\" href=\"https://www.google.com/calendar/render?${query}\">Create Event</a>`;\n};\n\nexport interface State {\n  text: string;\n  highlighted: boolean;\n}\n\nconst init = () => {\n  const initialState: State = {\n    text: undefined,\n    highlighted: false\n  };\n  let state = initialState;\n\n  const makeRenderer = (root: HTMLElement, initialState: State) => (\n    nextState?: State\n  ) => {\n    let state = typeof nextState === \"undefined\" ? initialState : nextState;\n    const innerHTML = `<div>\n<h1>Create an Event</h1>\n    ${\n      state.highlighted\n        ? `<code>${state.text}</code><div>${renderGuess(state.text)}</div>`\n        : \"Please highlight some text first!\"\n    }</div>`;\n    root.innerHTML = innerHTML;\n    return state;\n  };\n  const render = makeRenderer(document.querySelector(\"#popup\"), initialState);\n  render();\n\n  const setText = (text?: string) => (state: State): State =>\n    set(state, _ => _.text)(text);\n  const setHighlighted = (highlighted: boolean) => (state: State): State =>\n    set(state, _ => _.highlighted)(highlighted);\n\n  const handleText = ({ text }) => {\n    if (typeof text === \"undefined\") {\n      console.log(\"text undefined\");\n      state = compose(render, setText(), setHighlighted(false))(state);\n    } else {\n      console.log(\"text defined\");\n      state = compose(render, setText(text), setHighlighted(true))(state);\n    }\n  };\n\n  chrome.tabs.query(\n    {\n      active: true,\n      currentWindow: true\n    },\n    tabs => {\n      const [{ id }] = tabs;\n      chrome.tabs.sendMessage(id, { getSelection: true }, response => {\n        console.log(response);\n        if (typeof response !== \"undefined\") {\n          handleText(response);\n        }\n      });\n    }\n  );\n};\n\ndocument.addEventListener(\"DOMContentLoaded\", init);\n"]}